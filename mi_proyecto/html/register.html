<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/departamentos_municipios.js" defer></script> <!-- Asegúrate de que la ruta sea correcta -->
</head>
<body>
    <div class="container">
        <img src="../img/logo.png" alt="Logo de la Cruz Roja Colombiana">
        <h1>Registro de Usuario</h1>
        
        <form action="../php/register_process.php" method="POST" id="registro_form">
            <label for="primer_nombre">Primer Nombre:</label>
            <input type="text" id="primer_nombre" name="primer_nombre" placeholder="Ingrese su primer nombre" required pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo se permiten letras">

            <label for="segundo_nombre">Segundo Nombre:</label>
            <input type="text" id="segundo_nombre" name="segundo_nombre" placeholder="Ingrese su segundo nombre" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo se permiten letras">

            <label for="primer_apellido">Primer Apellido:</label>
            <input type="text" id="primer_apellido" name="primer_apellido" placeholder="Ingrese su primer apellido" required pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo se permiten letras">

            <label for="segundo_apellido">Segundo Apellido:</label>
            <input type="text" id="segundo_apellido" name="segundo_apellido" placeholder="Ingrese su segundo apellido" required pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo se permiten letras">

            <label for="correo">Correo Electrónico:</label>
            <input type="email" id="correo" name="correo" placeholder="Ingrese su correo electrónico" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" title="Por favor ingrese un correo electrónico válido">

            <label for="telefono">Número de Teléfono:</label>
            <input type="tel" id="telefono" name="telefono" placeholder="Ingrese su número de teléfono" required pattern="^\d{10}$" title="El número de teléfono debe tener 10 dígitos">

            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" placeholder="Ingrese su edad" required min="0" max="120" oninput="actualizarAgrupacion(); validarTipoDocumento();">

            <label for="tipo_documento">Tipo de Documento:</label>
            <select id="tipo_documento" name="tipo_documento" required>
                <option value="">Seleccione...</option>
                <option value="registro civil">Registro Civil</option>
                <option value="Cédula de Ciudadanía">Cédula de Ciudadanía</option>
                <option value="Tarjeta de Identidad">Tarjeta de Identidad</option>
                <option value="Cédula de Extranjería">Cédula de Extranjería</option>
                <option value="Pasaporte">Pasaporte</option>
            </select>

            <label for="numero_documento">Número de Documento:</label>
            <input type="text" id="numero_documento" name="numero_documento" placeholder="Ingrese su número de documento" required pattern="^\d+$" title="El número de documento debe ser solo números">

            <label for="agrupacion">Agrupación:</label>
            <select id="agrupacion" name="agrupacion" required>
                <option value="">Seleccione...</option>
            </select>

            <label for="departamento">Departamento:</label>
            <select id="departamento" name="departamento" required>
                <option value="">Seleccione un Departamento</option>
                <!-- Lista de departamentos -->
                <option value="Amazonas">Amazonas</option>
                <option value="Antioquia">Antioquia</option>
                <option value="Arauca">Arauca</option>
                <option value="Atlántico">Atlántico</option>
                <option value="Bolívar">Bolívar</option>
                <option value="Boyacá">Boyacá</option>
                <option value="Caldas">Caldas</option>
                <option value="Caquetá">Caquetá</option>
                <option value="Casanare">Casanare</option>
                <option value="Cauca">Cauca</option>
                <option value="Cesar">Cesar</option>
                <option value="Chocó">Chocó</option>
                <option value="Córdoba">Córdoba</option>
                <option value="Cundinamarca">Cundinamarca</option>
                <option value="Guainía">Guainía</option>
                <option value="Guaviare">Guaviare</option>
                <option value="Huila">Huila</option>
                <option value="La Guajira">La Guajira</option>
                <option value="Magdalena">Magdalena</option>
                <option value="Meta">Meta</option>
                <option value="Nariño">Nariño</option>
                <option value="Norte de Santander">Norte de Santander</option>
                <option value="Putumayo">Putumayo</option>
                <option value="Quindío">Quindío</option>
                <option value="Risaralda">Risaralda</option>
                <option value="San Andrés y Providencia">San Andrés y Providencia</option>
                <option value="Santander">Santander</option>
                <option value="Sucre">Sucre</option>
                <option value="Tolima">Tolima</option>
                <option value="Valle del Cauca">Valle del Cauca</option>
                <option value="Vaupés">Vaupés</option>
                <option value="Vichada">Vichada</option>                
            </select>

            <label for="municipio">Municipio:</label>
            <select id="municipio" name="municipio" required>
                <option value="">Seleccione primero un departamento</option>
            </select>

            <label for="numero_carnet">Número de Carnet:</label>
            <input type="text" id="numero_carnet" name="numero_carnet" placeholder="Ingrese su número de carnet" required pattern="^\d{1,}$" title="El número de carnet debe ser numérico">

            <label for="usuario">Usuario:</label>
            <input type="text" id="usuario" name="usuario" placeholder="Ingrese un nombre de usuario" required pattern="^[A-Za-z0-9_]{5,15}$" title="El usuario debe tener entre 5 y 15 caracteres y solo puede contener letras, números y guiones bajos">

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" placeholder="Cree una contraseña" required pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" title="La contraseña debe tener al menos 8 caracteres, incluir letras y números">

            <label for="confirm_password">Confirmar Contraseña:</label>
            <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirme su contraseña" required pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" title="La contraseña debe tener al menos 8 caracteres, incluir letras y números">

            <button type="submit">Registrarse</button>
        </form>

        <!-- Botón para regresar al inicio de sesión -->
        <div class="register-link">
            <p>¿Ya tienes cuenta? <a href="../html/login.html">Iniciar Sesión</a></p>
        </div>
    </div>

    <script>
        // Función que actualiza las opciones de la agrupación según la edad
        function actualizarAgrupacion() {
            const edad = parseInt(document.getElementById("edad").value, 10);
            const agrupacion = document.getElementById("agrupacion");

            // Si no hay edad, no hacer nada
            if (isNaN(edad)) {
                return;
            }

            agrupacion.innerHTML = '<option value="">Seleccione...</option>';

            if (edad < 18) {
                agrupacion.innerHTML += '<option value="Juvenil">Juvenil</option>';
            } else if (edad >= 18 && edad <= 60) {
                agrupacion.innerHTML += 
                    '<option value="Socorrista">Socorrista</option>' +
                    '<option value="Voluntario de Apoyo">Voluntario de Apoyo</option>' +
                    '<option value="Administrativo">Administrativo</option>' +
                    '<option value="Invitado">Invitado</option>';
            } else if (edad > 60) {
                agrupacion.innerHTML += 
                    '<option value="Dama Gris">Dama Gris</option>' +
                    '<option value="Socorrista">Socorrista</option>' +
                    '<option value="Voluntario de Apoyo">Voluntario de Apoyo</option>' +
                    '<option value="Administrativo">Administrativo</option>' +
                    '<option value="Invitado">Invitado</option>' +
                    '<option value="Edad Dorada">Edad Dorada</option>';
            }
        }

        // Función que valida el tipo de documento según la edad
        function validarTipoDocumento() {
            const edad = parseInt(document.getElementById("edad").value, 10);
            const tipoDocumento = document.getElementById("tipo_documento");

            // Si la edad es menor de 7, solo se puede elegir "Registro Civil"
            if (edad < 7) {
                tipoDocumento.innerHTML = `
                    <option value="registro civil">Registro Civil</option>
                `;
            } else if (edad >= 7 && edad < 18) {
                tipoDocumento.innerHTML = `
                    <option value="Tarjeta de Identidad">Tarjeta de Identidad</option>
                `;
            } else {
                tipoDocumento.innerHTML = 
                    '<option value="Cédula de Ciudadanía">Cédula de Ciudadanía</option>' +
                    '<option value="Tarjeta de Identidad">Tarjeta de Identidad</option>' +
                    '<option value="Cédula de Extranjería">Cédula de Extranjería</option>' +
                    '<option value="Pasaporte">Pasaporte</option>';
            }
        }
    </script>
</body>
</html>
